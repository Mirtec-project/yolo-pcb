# Ultralytics ğŸš€ AGPL-3.0 License - https://ultralytics.com/license
# YOLOv10m-lite object detection model for PCB data (2 classes, simplified)
# Model docs: https://docs.ultralytics.com/models/yolov10
# Task docs: https://docs.ultralytics.com/tasks/detect

nc: 2  # number of classes

scales:
  m: [1, 1, 512]  # scale for 'm'; ê·¸ëŒ€ë¡œ ìœ ì§€ (ê¹Šì´, ë„ˆë¹„, max_channels)

# --- Simplified Backbone ---
backbone:
  # [from, repeats, module, args]
  - [-1, 1, Conv, [64, 3, 2]]            # 0: P1/2
  - [-1, 1, Conv, [128, 3, 2]]           # 1: P2/4
  - [-1, 1, C3k2, [256, False, 0.25]]    # 2: **ë³€ê²½** - ë°˜ë³µ íšŸìˆ˜ 2 â†’ 1 (ê²½ëŸ‰í™”)
  - [-1, 1, Conv, [256, 3, 2]]           # 3: P3/8
  - [-1, 1, C3k2, [512, False, 0.25]]    # 4: **ë³€ê²½** - ë°˜ë³µ íšŸìˆ˜ 2 â†’ 1
  - [-1, 1, Conv, [512, 3, 2]]           # 5: P4/16
  - [-1, 1, C3k2, [512, True]]           # 6: **ë³€ê²½** - ë°˜ë³µ íšŸìˆ˜ 2 â†’ 1
  - [-1, 1, Conv, [1024, 3, 2]]          # 7: P5/32
  - [-1, 1, C3k2, [1024, True]]          # 8: **ë³€ê²½** - ë°˜ë³µ íšŸìˆ˜ 2 â†’ 1
  - [-1, 1, SPPF, [1024, 5]]             # 9: SPPF layer for multi-scale features
  # **ì œê±°**: ê¸°ì¡´ ëª¨ë¸ì˜ ë§ˆì§€ë§‰ C2PSA ëª¨ë“ˆ ì‚­ì œ â†’ ë‹¨ìˆœí™”

# --- Simplified Head ---
head:
  - [-1, 1, nn.Upsample, [None, 2, "nearest"]]  # 10: Upsample SPPF ì¶œë ¥
  - [[-1, 5], 1, Concat, [1]]                     # 11: ë°±ë³¸ì˜ index 5 (P4/16) í”¼ì²˜ì™€ concat
  - [-1, 1, C3k2, [512, False]]                    # 12: concatëœ í”¼ì²˜ ì²˜ë¦¬ (ë°˜ë³µ 1íšŒ)
  
  - [-1, 1, nn.Upsample, [None, 2, "nearest"]]     # 13: Upsampleí•˜ì—¬ P3 scale ë§ì¶¤
  - [[-1, 3], 1, Concat, [1]]                     # 14: ë°±ë³¸ì˜ index 3 (P3/8) í”¼ì²˜ì™€ concat
  - [-1, 1, C3k2, [256, False]]                    # 15: P3 scale í”¼ì²˜ ì²˜ë¦¬
  
  - [-1, 1, Conv, [256, 3, 2]]                     # 16: P3ì—ì„œ P4ë¡œ ë‹¤ìš´ìƒ˜í”Œ (ê³µê°„ í¬ê¸° ì¡°ì •)
  - [[-1, 12], 1, Concat, [1]]                    # 17: ì´ì „ P4 ì²˜ë¦¬ ê²°ê³¼ì™€ concat (index 12 ì°¸ì¡°)
  - [-1, 1, C3k2, [512, False]]                    # 18: P4 scale í”¼ì²˜ ì²˜ë¦¬
  
  - [-1, 1, Conv, [512, 3, 2]]                     # 19: P4ì—ì„œ P5ë¡œ ë‹¤ìš´ìƒ˜í”Œ
  - [[-1, 9], 1, Concat, [1]]                     # 20: ë°±ë³¸ì˜ SPPF ì¶œë ¥ (index 9)ì™€ concat
  - [-1, 1, C3k2, [1024, True]]                    # 21: P5 scale í”¼ì²˜ ì²˜ë¦¬
  
  - [[15, 18, 21], 1, Detect, [nc]]               # 22: Detect layer, P3/P4/P5 ê²°í•©
